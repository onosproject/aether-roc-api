#!/bin/bash

set -e

go get github.com/go-playground/overalls && go get github.com/mattn/goveralls

overalls -project=$GOPATH/src/github.com/onosproject/aether-roc-api -concurrency 2 -covermode=count -ignore=".git,vendor,models,tools"
mv overalls.coverprofile overalls.coverprofile.orig
grep -v .pb.go overalls.coverprofile.orig >overalls.coverprofile
goveralls -coverprofile=overalls.coverprofile -service travis-pro -repotoken JiHCdoXgxgi2tI3hwstqag2nVvZCGkWc5

